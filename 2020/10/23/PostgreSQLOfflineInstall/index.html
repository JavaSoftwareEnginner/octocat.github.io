<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>CentOS7 通过源码编译离线安装、配置PostgreSQL9.5及PostGIS2.2 | 晓风残月Shofcy</title><meta name="description" content="CentOS7 通过源码编译离线安装、配置PostgreSQL9.5及PostGIS2.2"><meta name="keywords" content="Linux,PostgreSQL,PostGIS"><meta name="author" content="晓风残月"><meta name="copyright" content="晓风残月"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/xiaofeng.ico"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="canonical" href="https://blog.shofcy.cn/2020/10/23/PostgreSQLOfflineInstall/"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="CentOS7 通过源码编译离线安装、配置PostgreSQL9.5及PostGIS2.2"><meta name="twitter:description" content="CentOS7 通过源码编译离线安装、配置PostgreSQL9.5及PostGIS2.2"><meta name="twitter:image" content="https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=3711244278,2311121617&amp;fm=26&amp;gp=0.jpg"><meta property="og:type" content="article"><meta property="og:title" content="CentOS7 通过源码编译离线安装、配置PostgreSQL9.5及PostGIS2.2"><meta property="og:url" content="https://blog.shofcy.cn/2020/10/23/PostgreSQLOfflineInstall/"><meta property="og:site_name" content="晓风残月Shofcy"><meta property="og:description" content="CentOS7 通过源码编译离线安装、配置PostgreSQL9.5及PostGIS2.2"><meta property="og:image" content="https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=3711244278,2311121617&amp;fm=26&amp;gp=0.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="next" title="SpringBoot启动后执行某个方法的三种实现方式" href="https://blog.shofcy.cn/2020/01/03/SpringBootStartMethod/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://blog.shofcy.cn/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight_copy: 'true',
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: '添加书签',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天'

  
}</script></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#安装postgresql"><span class="toc-number">1.</span> <span class="toc-text">安装postgresql</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#下载源码"><span class="toc-number">1.1.</span> <span class="toc-text">下载源码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#解压-安装"><span class="toc-number">1.2.</span> <span class="toc-text">解压 安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#用户权限与环境变量"><span class="toc-number">1.3.</span> <span class="toc-text">用户权限与环境变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#初始化数据库"><span class="toc-number">1.4.</span> <span class="toc-text">初始化数据库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#启动和连接"><span class="toc-number">1.5.</span> <span class="toc-text">启动和连接</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#设置开机启动"><span class="toc-number">1.6.</span> <span class="toc-text">设置开机启动</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#安装PostGIS"><span class="toc-number">2.</span> <span class="toc-text">安装PostGIS</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#proj4"><span class="toc-number">2.1.</span> <span class="toc-text">proj4</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#geos"><span class="toc-number">2.2.</span> <span class="toc-text">geos</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#libxml2"><span class="toc-number">2.3.</span> <span class="toc-text">libxml2</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#gdal"><span class="toc-number">2.4.</span> <span class="toc-text">gdal</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#json-c"><span class="toc-number">2.5.</span> <span class="toc-text">json-c</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PostGIS"><span class="toc-number">2.6.</span> <span class="toc-text">PostGIS</span></a></li></ol></li></ol></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=3711244278,2311121617&amp;fm=26&amp;gp=0.jpg)"><div id="page-header"><span class="pull-left"> <a class="blog_title" id="site-name" href="/">晓风残月Shofcy</a></span><div class="open toggle-menu pull-right"><div class="menu-icon-first"></div><div class="menu-icon-second"></div><div class="menu-icon-third"></div></div><span class="pull-right menus"><div class="mobile_author_icon"><img class="lozad" data-src="https://i.loli.net/2019/08/23/VEOJlcFzp24k5ij.gif" onerror="onerror=null;src='/img/friend_404.gif'"><div class="mobile_author-info__description">精益求精~艺无止境</div></div><hr><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a><a class="site-page" href="/gallery/"><i class="fa-fw fa fa-photo"></i><span> 相册</span></a><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-coffee"></i><span> 留言板</span></a><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a><script>document.body.addEventListener('touchstart', function(){ });</script></div></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title"><div class="posttitle">CentOS7 通过源码编译离线安装、配置PostgreSQL9.5及PostGIS2.2</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2020-10-23<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> 更新于 2020-10-23</time><span class="post-meta__separator mobile_hidden">|</span><span class="mobile_hidden"><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/PostgreSQL/">PostgreSQL</a></span><div class="post-meta-wordcount"><span>字数总计: </span><span class="word-count">2.8k</span><span class="post-meta__separator">|</span><span>阅读时长: 12 分钟</span><span class="post-meta__separator">|</span><span>阅读量: </span><span id="busuanzi_value_page_pv"></span></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h1 id="安装postgresql"><a href="#安装postgresql" class="headerlink" title="安装postgresql"></a>安装postgresql</h1><h2 id="下载源码"><a href="#下载源码" class="headerlink" title="下载源码"></a>下载源码</h2><p><a href="https://www.postgresql.org/ftp/source/" target="_blank" rel="noopener">https://www.postgresql.org/ftp/source/</a></p>
<p>找到对应版本的 <code>tar.gz</code> 安装包下载拷贝到服务器</p>
<h2 id="解压-安装"><a href="#解压-安装" class="headerlink" title="解压 安装"></a>解压 安装</h2><p><code>tar -xvf postgresql-9.5.14.tar.gz</code></p>
<p><strong>进入解压目录</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安装一个gcc编译器</span></span><br><span class="line">yum install gcc</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装make</span></span><br><span class="line">yum install make</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看系统自带readline包</span></span><br><span class="line">rpm -qa|grep  readline</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 通过yum search readline进行搜索可以发现一个readline-devel包</span></span><br><span class="line">yum search readline</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装readline-devel包</span></span><br><span class="line">yum install readline-devel</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装zlib-devel包</span></span><br><span class="line">yum install zlib-devel</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 配置安装信息 --prefix 安装目录</span></span><br><span class="line">./configure  --prefix=/usr/local/postgresql</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 编译</span></span><br><span class="line">make</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装</span></span><br><span class="line">make install</span><br></pre></td></tr></table></figure>

<h2 id="用户权限与环境变量"><a href="#用户权限与环境变量" class="headerlink" title="用户权限与环境变量"></a>用户权限与环境变量</h2><p>编译安装成功后，接下来要做的就是创建一个普通用户，因为默认超级用户（root）不能启动postgresql，所以需要创建一个普通用户来启动数据库，执行以下命令创建用户：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd postgres</span><br></pre></td></tr></table></figure>

<p>接下来需要设置权限，将postgres的数据目录全部赋权给postgres用户（此处我将postgres的数据目录指定在在/usr/local/postgresql/data目录下）：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown -R postgres:postgres /usr/local/postgresql/</span><br></pre></td></tr></table></figure>

<p>最后为了方便起见设置一下相关的环境变量，此处仅仅设置postgres用户的环境变量，所以首先通过 <code>su - postgres</code> 切换到postgres用户，打开 <code>.bash_profile</code> 文件并追加以下内容：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">PGHOME=/usr/local/postgresql</span><br><span class="line">export PGHOME</span><br><span class="line">PGDATA=/usr/local/postgresql/data</span><br><span class="line">export PGDATA</span><br><span class="line">PATH=$PATH:$HOME/.local/bin:$HOME/bin:$PGHOME/bin</span><br><span class="line">export PATH</span><br></pre></td></tr></table></figure>

<p>修改完成后可以通过 <code>source ./.bash_profile</code> 命令使其立即生效，接下来检验一下环境变量是否设置正确，切换任意目录输入 <code>which psql</code> 以及 <code>psql -V</code> 即可分别查看psql客户端的路径以及postgresql的数据库版本，如下：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[postgres@localhost ~]$ <span class="built_in">source</span> ./.bash_profile</span><br><span class="line">[postgres@localhost ~]$ <span class="built_in">which</span> psql</span><br><span class="line">/usr/<span class="built_in">local</span>/postgresql/bin/psql</span><br><span class="line">[postgres@localhost ~]$ psql -V</span><br><span class="line">psql (PostgreSQL) 9.5.14</span><br></pre></td></tr></table></figure>

<p>一切准备就绪之后接下来就可以初始化数据库了。</p>
<h2 id="初始化数据库"><a href="#初始化数据库" class="headerlink" title="初始化数据库"></a>初始化数据库</h2><p>由于配置了环境变量，所以此处我们直接执行<code>initdb</code>即可完成db初始化：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">initdb</span><br></pre></td></tr></table></figure>

<p>看到如下信息就说明初始化成功了：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">[postgres@localhost ~]$ initdb</span><br><span class="line">The files belonging to this database system will be owned by user "postgres".</span><br><span class="line">This user must also own the server process.</span><br><span class="line"></span><br><span class="line">The database cluster will be initialized with locale "en_US.UTF-8".</span><br><span class="line">The default database encoding has accordingly been set to "UTF8".</span><br><span class="line">The default text search configuration will be set to "english".</span><br><span class="line"></span><br><span class="line">Data page checksums are disabled.</span><br><span class="line"></span><br><span class="line">creating directory /usr/local/postgresql/data ... ok</span><br><span class="line">creating subdirectories ... ok</span><br><span class="line">selecting default max_connections ... 100</span><br><span class="line">selecting default shared_buffers ... 128MB</span><br><span class="line">selecting dynamic shared memory implementation ... posix</span><br><span class="line">creating configuration files ... ok</span><br><span class="line">creating template1 database in /usr/local/postgresql/data/base/1 ... ok</span><br><span class="line">initializing pg_authid ... ok</span><br><span class="line">initializing dependencies ... ok</span><br><span class="line">creating system views ... ok</span><br><span class="line">loading system objects' descriptions ... ok</span><br><span class="line">creating collations ... ok</span><br><span class="line">creating conversions ... ok</span><br><span class="line">creating dictionaries ... ok</span><br><span class="line">setting privileges on built-in objects ... ok</span><br><span class="line">creating information schema ... ok</span><br><span class="line">loading PL/pgSQL server-side language ... ok</span><br><span class="line">vacuuming database template1 ... ok</span><br><span class="line">copying template1 to template0 ... ok</span><br><span class="line">copying template1 to postgres ... ok</span><br><span class="line">syncing data to disk ... ok</span><br><span class="line"></span><br><span class="line">WARNING: enabling "trust" authentication for local connections</span><br><span class="line">You can change this by editing pg_hba.conf or using the option -A, or</span><br><span class="line">--auth-local and --auth-host, the next time you run initdb.</span><br><span class="line"></span><br><span class="line">Success. You can now start the database server using:</span><br><span class="line"></span><br><span class="line">    pg_ctl -D /usr/local/postgresql/data -l logfile start</span><br></pre></td></tr></table></figure>

<p>同时在postgresql的目录可以看到生成的数据目录data以及该目录的相关数据和配置文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[postgres@localhost ~]$ ls /usr/local/postgresql/</span><br><span class="line">bin  data  include  lib  share</span><br><span class="line">[postgres@localhost ~]$ ls /usr/local/postgresql/data/</span><br><span class="line">base          pg_dynshmem    pg_multixact  pg_snapshots  pg_tblspc    postgresql.auto.conf</span><br><span class="line">global        pg_hba.conf    pg_notify     pg_stat       pg_twophase  postgresql.conf</span><br><span class="line">pg_clog       pg_ident.conf  pg_replslot   pg_stat_tmp   PG_VERSION</span><br><span class="line">pg_commit_ts  pg_logical     pg_serial     pg_subtrans   pg_xlog</span><br></pre></td></tr></table></figure>

<p>如上图，base目录是表空间目录，global目录是相关全局变量的目录，pg_hba.conf和postgresql.conf在之前的博客也都提及了，一个是访问控制配置（127.0.0.1改为信任的客户端ip网段使其可以远程访问），一个是postgresql主配置文件（listen_address=’localhost’改为’*’星号使其监听整个网络），方便起见我这里将pg_hba.conf的ip地址修改为 <code>0.0.0.0/0</code> ，而加密方式改为 <code>md5</code> ，就表示需要密码访问，算是提供一个最低级的安全防护：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[postgres@localhost data]$ cd /usr/local/postgresql/data</span><br><span class="line">[postgres@localhost data]$ vim pg_hba.conf</span><br><span class="line"><span class="meta">#</span><span class="bash"> IPv4 <span class="built_in">local</span> connections:</span></span><br><span class="line">host    all             all             127.0.0.1/32            trust</span><br><span class="line">host    all             all             0.0.0.0/0               md5</span><br></pre></td></tr></table></figure>

<p>而postgresql.conf就像上面说的那样修改一下listen_address使其监听整个网络即可：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[postgres@localhost data]$ vim postgresql.conf</span><br><span class="line">修改#listen_addresses = 'localhost'  为  listen_addresses='*'</span><br></pre></td></tr></table></figure>

<p>最后别忘记开放防火墙pg的5432端口，否则即使做了上面两处修改客户端依然无法连接postgresql，所以将5432端口加入到zone即可，依次运行以下命令（注意此处需要切回root用户，否则没有权限）：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 将5432端口加入防火墙白名单</span></span><br><span class="line">firewall-cmd --zone=public --add-port=5432/tcp --permanent</span><br><span class="line"><span class="meta">#</span><span class="bash"> 重启防火墙使修改生效</span></span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>

<p>至此就配置完毕了，还可以通过 <code>firewall-cmd --zone=public --list-ports</code> 来查看已打开的端口列表再次确认一下，看到如下提示则说明已成功开启端口：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# firewall-cmd --zone=public --list-ports</span><br><span class="line">5432/tcp</span><br></pre></td></tr></table></figure>

<p>至此配置相关的内容就全部完成了，最后就是启动并连接数据库了。</p>
<h2 id="启动和连接"><a href="#启动和连接" class="headerlink" title="启动和连接"></a>启动和连接</h2><p>在初始化数据库结束时我们已经看到了启动命令，如下：</p>
<blockquote>
<p>Success. You can now start the database server using:<br>         pg_ctl -D /usr/local/postgresql/data -l logfile start</p>
</blockquote>
<p>由于我们设置了环境变量，所以已经指定了数据目录PGDATA， <code>-l</code> 表示日志文件目录，通常需要指定，所以我们在/usr/local/postgresql根目录下再创建一个log目录用来存放日志文件（注意别忘记赋予可写的权限），<br>最后运行 <code>pg_ctl start -l /usr/local/postgresql/log/pg_server.log</code> 即可启动数据库，看到如下提示就说明启动成功了：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# su - postgres</span><br><span class="line">[postgres@localhost ~]$ mkdir /usr/local/postgresql/log</span><br><span class="line">[postgres@localhost ~]$ chmod -R 777 /usr/local/postgresql/log</span><br><span class="line">[postgres@localhost ~]$ pg_ctl start -l /usr/local/postgresql/log/pg_server.log</span><br><span class="line">server starting</span><br></pre></td></tr></table></figure>

<p>或者通过 <code>ps -ef|grep postgres</code> 查看一下postgres相关是否存在相关进程，如下图也可以说明已启动成功：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[postgres@localhost ~]$ ps -ef|grep postgres</span><br><span class="line">postgres  21649  21648  0 14:20 pts/0    00:00:00 -bash</span><br><span class="line">postgres  21674      1  0 14:23 pts/0    00:00:00 /usr/local/postgresql/bin/postgres</span><br><span class="line">postgres  21676  21674  0 14:23 ?        00:00:00 postgres: checkpointer process   </span><br><span class="line">postgres  21677  21674  0 14:23 ?        00:00:00 postgres: writer process   </span><br><span class="line">postgres  21678  21674  0 14:23 ?        00:00:00 postgres: wal writer process   </span><br><span class="line">postgres  21679  21674  0 14:23 ?        00:00:00 postgres: autovacuum launcher process  </span><br><span class="line">postgres  21680  21674  0 14:23 ?        00:00:00 postgres: stats collector process</span><br></pre></td></tr></table></figure>

<p>而在日志文件目录中可以看到数据库日志文件以及刚才的启动日志：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[postgres@localhost ~]$ cat /usr/local/postgresql/log/pg_server.log </span><br><span class="line">LOG:  database system was shut down at 2020-10-23 13:56:22 CST</span><br><span class="line">LOG:  MultiXact member wraparound protections are now enabled</span><br><span class="line">LOG:  database system is ready to accept connections</span><br><span class="line">LOG:  autovacuum launcher started</span><br></pre></td></tr></table></figure>

<p>启动成功后我们就可以通过postgresql自带的客户端工具 <strong>psql</strong> 来进行连接，直接输入 <code>psql</code> 看到版本信息则说明连接成功：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[postgres@localhost ~]$ psql</span><br><span class="line">psql (9.5.14)</span><br><span class="line">Type "help" for help.</span><br><span class="line"></span><br><span class="line">postgres=#</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 启动服务</span></span><br><span class="line">pg_ctl start -l /usr/local/postgresql/log/pg_server.log</span><br><span class="line"><span class="meta">#</span><span class="bash"> 停止服务</span></span><br><span class="line">pg_ctl stop</span><br><span class="line"><span class="meta">#</span><span class="bash"> 重启服务</span></span><br><span class="line">pg_ctl restart -l /usr/local/postgresql/log/pg_server.log</span><br></pre></td></tr></table></figure>

<h2 id="设置开机启动"><a href="#设置开机启动" class="headerlink" title="设置开机启动"></a>设置开机启动</h2><p>首先要做的第一步就是找到pg的启动脚本示例，在pg的源码目录下的 <code>contrib/start-scripts</code> 的 <code>linux</code> 文件，将它拷贝一份到 <code>/etc/init.d</code> 目录下并重命名为postgresql：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp /usr/local/postgresql/postgresql-9.5.14/contrib/start-scripts/linux /etc/init.d/postgresql</span><br></pre></td></tr></table></figure>

<p>接下来修改脚本中的参数项，如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Installation prefix pg主目录</span></span><br><span class="line">prefix=/usr/local/postgresql</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Data directory pg的data目录</span></span><br><span class="line">PGDATA="/usr/local/postgresql/data"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Who to run the postmaster as, usually <span class="string">"postgres"</span>.  (NOT <span class="string">"root"</span>) pg用户，切记不能用root，root用户无法启动pg数据库</span></span><br><span class="line">PGUSER=postgres</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Where to keep a <span class="built_in">log</span> file pg日志文件</span></span><br><span class="line">PGLOG="$prefix/log/pg_server.log"</span><br></pre></td></tr></table></figure>

<p>然后为所有用户添加改脚本的可执行权限：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod a+x /etc/init.d/postgresql</span><br></pre></td></tr></table></figure>

<p>最后用root用户通过chkconfig命令将该脚本注册为开机启动即可：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig --add postgresql</span><br></pre></td></tr></table></figure>

<p>接下来要做的第一件事就是设置postgres用户的密码（默认为空），用psql连接成功后直接输入 <code>\password</code> 即会提示输入两次密码，如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">postgres=# \q</span><br><span class="line">[postgres@localhost ~]$ psql</span><br><span class="line">psql (9.5.14)</span><br><span class="line">Type "help" for help.</span><br><span class="line"></span><br><span class="line">postgres=# \password</span><br><span class="line">Enter new password: </span><br><span class="line">Enter it again: </span><br><span class="line">postgres=# \l</span><br><span class="line">                                  List of databases</span><br><span class="line">   Name    |  Owner   | Encoding |   Collate   |    Ctype    |   Access privileges   </span><br><span class="line">-----------+----------+----------+-------------+-------------+-----------------------</span><br><span class="line"> postgres  | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | </span><br><span class="line"> template0 | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres          +</span><br><span class="line">           |          |          |             |             | postgres=CTc/postgres</span><br><span class="line"> template1 | postgres | UTF8     | en_US.UTF-8 | en_US.UTF-8 | =c/postgres          +</span><br><span class="line">           |          |          |             |             | postgres=CTc/postgres</span><br><span class="line">(3 rows)</span><br></pre></td></tr></table></figure>

<p>此处我们暂且将密码修改为123456，通过 <code>\l</code> 命令即可查看数据库列表，然后输出 <code>\q</code> ，关于psql工具的使用在此处就不再做过多赘述。最后也是最重要的一点就是验证非本地客户端工具的连接了，毕竟我们是要做数据库服务器的，这里我选择的工具是Navicat Premium，在主机（Windows10）打开Navicat与虚拟机中的postgresql服务器进行连接测试，结果可以连接成功，同理停止数据库可以使用命令 <code>pg_ctl stop</code> 来关闭postgresql服务，很简单，至此关于源码编译安装postgresql就已经全部结束了。</p>
<h1 id="安装PostGIS"><a href="#安装PostGIS" class="headerlink" title="安装PostGIS"></a>安装PostGIS</h1><p>要安装postgis需要先安装geos、libxml2、proj4、gdal、json-c这几个包我们就来一步一步的弄吧：</p>
<h2 id="proj4"><a href="#proj4" class="headerlink" title="proj4"></a>proj4</h2><p>下载地址：<a href="http://proj4.org/download.html，选择proj4-4.9.2.tar.gz" target="_blank" rel="noopener">http://proj4.org/download.html，选择proj4-4.9.2.tar.gz</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://download.osgeo.org/proj/proj-4.9.2.tar.gz</span><br></pre></td></tr></table></figure>

<p>解压源码包</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">proj-4.9.2.tar.gz</span><br></pre></td></tr></table></figure>

<p>进入解压后的目录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd proj-4.9.2</span><br></pre></td></tr></table></figure>

<p>配置安装路径</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/usr/local/proj-4.9.2</span><br></pre></td></tr></table></figure>

<p>编译并安装</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>

<h2 id="geos"><a href="#geos" class="headerlink" title="geos"></a>geos</h2><p>下载地址：<a href="http://trac.osgeo.org/geos，选择geos-3.5.1.tar.bz2" target="_blank" rel="noopener">http://trac.osgeo.org/geos，选择geos-3.5.1.tar.bz2</a></p>
<p>安装步骤与上述 <code>proj4</code> 一样，这里需要注意，<code>geos-3.5.1.tar.bz2</code> 包类型为  <code>bzip2</code> ，需要安装解压工具</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 下载</span></span><br><span class="line">wget http://download.osgeo.org/geos/geos-3.5.1.tar.bz2</span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装 bzip2 解压工具</span></span><br><span class="line">yum install bzip2</span><br><span class="line"><span class="meta">#</span><span class="bash"> 解压</span></span><br><span class="line">tar -jxvf geos-3.5.1.tar.bz2</span><br><span class="line"><span class="meta">#</span><span class="bash"> 进入目录</span></span><br><span class="line">cd geos-3.5.1</span><br><span class="line"><span class="meta">#</span><span class="bash"> 配置安装路径</span></span><br><span class="line">./configure --prefix=/usr/local/geos-3.5.1</span><br><span class="line"><span class="meta">#</span><span class="bash"> 安装 gcc-c++</span></span><br><span class="line">yum -y install gcc-c++.x86_64</span><br><span class="line"><span class="meta">#</span><span class="bash"> 编译并安装</span></span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>

<h2 id="libxml2"><a href="#libxml2" class="headerlink" title="libxml2"></a>libxml2</h2><p>下载地址 ： <a href="http://xmlsoft.org/sources/或ftp://xmlsoft.org/libxml2，选择libxml2-2.9.0.tar.gz" target="_blank" rel="noopener">http://xmlsoft.org/sources/或ftp://xmlsoft.org/libxml2，选择libxml2-2.9.0.tar.gz</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 下载</span></span><br><span class="line">wget http://xmlsoft.org/sources/libxml2-2.9.0.tar.gz</span><br><span class="line"><span class="meta">#</span><span class="bash"> 解压</span></span><br><span class="line">tar -zxvf libxml2-2.9.0.tar.gz</span><br><span class="line"><span class="meta">#</span><span class="bash"> 进入目录</span></span><br><span class="line">cd libxml2-2.9.0</span><br><span class="line"><span class="meta">#</span><span class="bash"> 配置安装路径</span></span><br><span class="line">./configure --prefix=/usr/local/libxml2-2.9.0</span><br><span class="line"><span class="meta">#</span><span class="bash"> 编译并安装</span></span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>

<h2 id="gdal"><a href="#gdal" class="headerlink" title="gdal"></a>gdal</h2><p>下载地址：<a href="http://trac.osgeo.org/gdal/wiki/DownloadSource，选择gdal-1.10.0.tar.gz" target="_blank" rel="noopener">http://trac.osgeo.org/gdal/wiki/DownloadSource，选择gdal-1.10.0.tar.gz</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 下载</span></span><br><span class="line">wget http://download.osgeo.org/gdal/1.10.0/gdal-1.10.0.tar.gz</span><br><span class="line"><span class="meta">#</span><span class="bash"> 解压</span></span><br><span class="line">tar -zxvf gdal-1.10.0.tar.gz</span><br><span class="line"><span class="meta">#</span><span class="bash"> 进入目录</span></span><br><span class="line">cd gdal-1.10.0</span><br><span class="line"><span class="meta">#</span><span class="bash"> 配置安装路径</span></span><br><span class="line">./configure --prefix=/usr/local/gdal-1.10.0</span><br><span class="line"><span class="meta">#</span><span class="bash"> 编译并安装</span></span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>

<h2 id="json-c"><a href="#json-c" class="headerlink" title="json-c"></a>json-c</h2><p>下载地址：<a href="https://s3.amazonaws.com/json-c_releases/releases/json-c-0.12.1.tar.gz" target="_blank" rel="noopener">https://s3.amazonaws.com/json-c_releases/releases/json-c-0.12.1.tar.gz</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 下载</span></span><br><span class="line">wget https://s3.amazonaws.com/json-c_releases/releases/json-c-0.12.1.tar.gz</span><br><span class="line"><span class="meta">#</span><span class="bash"> 解压</span></span><br><span class="line">tar -zxvf json-c-0.12.1.tar.gz</span><br><span class="line"><span class="meta">#</span><span class="bash"> 进入目录</span></span><br><span class="line">cd json-c-0.12.1</span><br><span class="line"><span class="meta">#</span><span class="bash"> 配置安装路径</span></span><br><span class="line">./configure --prefix=/usr/local/json-c-0.12.1</span><br><span class="line"><span class="meta">#</span><span class="bash"> 编译并安装</span></span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>

<h2 id="PostGIS"><a href="#PostGIS" class="headerlink" title="PostGIS"></a>PostGIS</h2><p>下载地址：<a href="http://download.osgeo.org/postgis/source/" target="_blank" rel="noopener">http://download.osgeo.org/postgis/source/</a> ，选择postgis-2.2.4.tar.gz</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 下载</span></span><br><span class="line">wget http://download.osgeo.org/postgis/source/postgis-2.2.4.tar.gz</span><br><span class="line"><span class="meta">#</span><span class="bash"> 解压</span></span><br><span class="line">tar -zxvf postgis-2.2.4.tar.gz</span><br><span class="line"><span class="meta">#</span><span class="bash"> 进入目录</span></span><br><span class="line">cd postgis-2.2.4</span><br><span class="line"><span class="meta">#</span><span class="bash"> 配置安装路径</span></span><br><span class="line">/configure  --with-pgconfig=/usr/local/postgresql/bin/pg_config </span><br><span class="line">--with-xml2config=/usr/local/libxml2/bin/xml2-config </span><br><span class="line">--with-geosconfig=/usr/local/geos/bin/geos-config </span><br><span class="line">--with-projdir=/usr/local/proj </span><br><span class="line">--with-gdalconfig=/usr/local/gdal/bin/gdal-config</span><br><span class="line"><span class="meta">#</span><span class="bash"> 编译并安装</span></span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>

<p>至此PostGIS已经安装完成，测试创建postgis扩展一切正常。</p>
<p>参考地址： <a href="https://blog.csdn.net/wlwlwlwl015/article/details/53256358" target="_blank" rel="noopener">https://blog.csdn.net/wlwlwlwl015/article/details/53256358</a></p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">晓风残月</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://blog.shofcy.cn/2020/10/23/PostgreSQLOfflineInstall/">https://blog.shofcy.cn/2020/10/23/PostgreSQLOfflineInstall/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.shofcy.cn">晓风残月Shofcy</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux    </a><a class="post-meta__tags" href="/tags/PostgreSQL/">PostgreSQL    </a><a class="post-meta__tags" href="/tags/PostGIS/">PostGIS    </a></div><div class="post_share"><div class="social-share" data-image="https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=3711244278,2311121617&amp;fm=26&amp;gp=0.jpg" data-sites="wechat,weibo,qq,facebook,twitter"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-buttom"><i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lozad post-qr-code__img" data-src="/img/wechat.jpg"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lozad post-qr-code__img" data-src="/img/alipay.jpg"><div class="post-qr-code__desc">支付宝</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="next-post pull-full"><a href="/2020/01/03/SpringBootStartMethod/"><img class="next_cover lozad" data-src="/images/SpringBootStartMethod/head.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>SpringBoot启动后执行某个方法的三种实现方式</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span>相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2019/10/30/PostgreSQLInstall/" title="CentOS7 通过yum云安装、配置 PostgreSQL 9.5数据库及PostGIS2.4扩展插件"><img class="relatedPosts_cover lozad" data-src="https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=3711244278,2311121617&fm=26&gp=0.jpg"><div class="relatedPosts_title">CentOS7 通过yum云安装、配置 PostgreSQL 9.5数据库及PostGIS2.4扩展插件</div></a></div><div class="relatedPosts_item"><a href="/2019/09/19/LinuxOfClamavInstallAndUse/" title="Linux下clamav杀毒软件安装与使用"><img class="relatedPosts_cover lozad" data-src="http://www.clamav.net/assets/clamav-trademark.png"><div class="relatedPosts_title">Linux下clamav杀毒软件安装与使用</div></a></div><div class="relatedPosts_item"><a href="/2019/11/26/nginxInstallAndUse/" title="CentOS7 下Nginx安装和使用"><img class="relatedPosts_cover lozad" data-src="https://kserver.club/imgServer/smallkserver/nginx/nginx.jpg"><div class="relatedPosts_title">CentOS7 下Nginx安装和使用</div></a></div><div class="relatedPosts_item"><a href="/2019/09/26/zabbixInstallAndUse/" title="CentOS7下zabbix安装与部署"><img class="relatedPosts_cover lozad" data-src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1569481660814&di=47b5f0bce4c753b48880543041be75d3&imgtype=0&src=http%3A%2F%2Fs5.51cto.com%2Fwyfs02%2FM01%2F9E%2F0B%2FwKiom1mKnBehN9mIAACbZPgUifA082.jpg-wh_651x-s_963877849.jpg"><div class="relatedPosts_title">CentOS7下zabbix安装与部署</div></a></div><div class="relatedPosts_item"><a href="/2019/08/23/pgsqldatefunction/" title="PostgreSQL中的时间格式转化函数使用常识"><img class="relatedPosts_cover lozad" data-src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1566560778427&di=e3a2688b06507bec358be068604151de&imgtype=0&src=http%3A%2F%2Fs2.51cto.com%2Foss%2F201806%2F22%2Fec69e0ae14ef9076ae3b762ff9e98ce0.jpg-wh_651x-s_9030766.jpg"><div class="relatedPosts_title">PostgreSQL中的时间格式转化函数使用常识</div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span>评论</span></div><div id="lv-container" data-id="city" data-uid="MTAyMC80NTc0OC8yMjI1OQ=="><script>(function(d, s) {
    var j, e = d.getElementsByTagName(s)[0];
    if (typeof LivereTower === 'function') { return; }
    j = d.createElement(s);
    j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
    j.async = true;
    e.parentNode.insertBefore(j, e);
})(document, 'script');</script></div></div></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2019 - 2022 By 晓风残月</div><div class="footer_custom_text">学习成就梦想 科技改变未来</div><div class="icp"><a href="http://beian.miit.gov.cn"><span>浙ICP备18049686号-2</span></a></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><section class="rightside" id="rightside"><i class="fa fa-book" id="readmode" title="阅读模式"> </i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换">繁</a><i class="fa fa-moon-o nightshift" id="nightshift" title="夜间模式"></i></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="/js/third-party/fireworks.js"></script><script src="/js/nightshift.js"></script><script id="ribbon" src="/js/third-party/canvas-ribbon.js" size="150" alpha="0.6" zindex="-1" data-click="true"></script><script id="ribbon" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/js/piao.js"></script><script src="/js/baidupush.js"> </script><script src="/js/tw_cn.js"></script><script>translateInitilization()

</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@1.2.2/instantpage.min.js" type="module"></script></body></html>